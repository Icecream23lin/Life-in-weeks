<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life in Weeks - ‰∫∫ÁîüÂë®Êï∞ÂèØËßÜÂåñ</title>
    <meta name="description" content="‰∏Ä‰∏™ÁÆÄÂçïËÄåÊ∑±ÂàªÁöÑ‰∫∫ÁîüÊó∂Èó¥ÂèØËßÜÂåñÂ∑•ÂÖ∑Ôºå‰ª•Âë®‰∏∫Âçï‰ΩçÂ±ïÁ§∫‰Ω†ÁöÑÁîüÂëΩÂéÜÁ®ã">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            margin: 0;
            padding: 0;
        }
        
        @media (max-width: 768px) {
            .week-grid {
                transform: scale(0.7);
                transform-origin: center;
            }
            .mobile-padding {
                padding: 1rem;
            }
            .mobile-text {
                font-size: 0.875rem;
                line-height: 1.4;
            }
            .mobile-card {
                padding: 1rem;
                margin: 0.5rem 0;
            }
        }
        
        @media (max-width: 480px) {
            .week-grid {
                transform: scale(0.5);
            }
        }
        
        .share-btn {
            transition: all 0.3s ease;
        }
        
        .share-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .wechat-download-tip {
            background: linear-gradient(135deg, #07c160, #00ae47);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;

        // ËØ≠Ë®ÄÊ£ÄÊµã
        const browserLocale = navigator.languages && navigator.languages[0] || navigator.language || 'en-US';
        const isChineseLocale = browserLocale.startsWith('zh');

        // ÁøªËØëÂáΩÊï∞
        const t = (key) => {
            const translations = {
                'zh-CN': {
                    pageTitle: "‰∫∫ÁîüÂë®Êï∞",
                    pageSubtitle: "‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂèØËßÜÂåñÂ∑•ÂÖ∑ÔºåÂ∏ÆÂä©‰Ω†ÊÄùËÄÉÊó∂Èó¥ÁöÑÊµÅÈÄù",
                    birthDateQuestion: "ËæìÂÖ•‰Ω†ÁöÑÂá∫ÁîüÊó•Êúü",
                    visualizeButton: "ÂèØËßÜÂåñ‰Ω†ÁöÑÊó∂Èó¥",
                    startOverButton: "ÈáçÊñ∞ÂºÄÂßã",
                    shareButton: "ÂàÜ‰∫´",
                    downloadCardButton: "‰∏ãËΩΩÂàÜ‰∫´Âç°Áâá",
                    lifeInWeeksTitle: "‰Ω†ÁöÑ‰∫∫ÁîüÂë®Êï∞",
                    weekHoverPast: " ‰Ω†ËøáÂéªÁöÑ‰∏ÄÂë®",
                    weekHoverCurrent: " ‰Ω†ÂΩìÂâçÁöÑ‰∏ÄÂë®",
                    weekHoverFuture: " ‰Ω†Êú™Êù•ÂèØËÉΩÁöÑ‰∏ÄÂë®",
                    legendPast: "ËøáÂéª",
                    legendPresent: "Áé∞Âú®",
                    legendFuture: "Êú™Êù•",
                    lifeHighlightsTitle: "‰∫∫Áîü‰∫ÆÁÇπ",
                    societalContextTitle: "Á§æ‰ºöËÉåÊôØ",
                    cosmicPerspectiveTitle: "ÂÆáÂÆôËßÜËßí",
                    naturalWorldTitle: "Ëá™ÁÑ∂‰∏ñÁïå",
                    shareCardTitle: "ÊàëÁöÑ‰∫∫ÁîüÂë®Êï∞"
                },
                'en-US': {
                    pageTitle: "Life in weeks",
                    pageSubtitle: "A simple visualization to reflect on the passage of time",
                    birthDateQuestion: "Enter a birthdate",
                    visualizeButton: "Visualize your time",
                    startOverButton: "Start over",
                    shareButton: "Share",
                    downloadCardButton: "Download Share Card",
                    lifeInWeeksTitle: "Your life in weeks",
                    weekHoverPast: " A week from your past",
                    weekHoverCurrent: " Your current week",
                    weekHoverFuture: " A week in your potential future",
                    legendPast: "Past",
                    legendPresent: "Present",
                    legendFuture: "Future",
                    lifeHighlightsTitle: "Life highlights",
                    societalContextTitle: "Societal context",
                    cosmicPerspectiveTitle: "Cosmic perspective",
                    naturalWorldTitle: "Natural world",
                    shareCardTitle: "My Life in Weeks"
                }
            };
            
            const currentLocale = isChineseLocale ? 'zh-CN' : 'en-US';
            return translations[currentLocale][key] || translations['en-US'][key] || key;
        };

        // Êú¨Âú∞ÂåñÊï∞Â≠óÊ†ºÂºèÂåñ
        const getFormattedNumber = (num) => {
            return new Intl.NumberFormat(isChineseLocale ? 'zh-CN' : 'en-US').format(num);
        };

        function WeeksOfLife() {
            const [step, setStep] = useState(1);
            const [birthdate, setBirthdate] = useState('');
            const [stats, setStats] = useState(null);
            const [showHoverData, setShowHoverData] = useState(false);
            const [hoverWeek, setHoverWeek] = useState(null);
            const [showShareOptions, setShowShareOptions] = useState(false);
            
            // ËÆ°ÁÆóÁªüËÆ°Êï∞ÊçÆ
            const calculateStats = (date) => {
                const birthDate = new Date(date);
                const today = new Date();
                const birthYear = birthDate.getFullYear();
                
                const msInWeek = 1000 * 60 * 60 * 24 * 7;
                const weeksLived = Math.floor((today - birthDate) / msInWeek);
                
                // 80Â≤Å = 80 * 52 = 4160Âë®
                const totalWeeks = 4160;
                const percentageLived = Math.round((weeksLived / totalWeeks) * 100);
                
                const msInDay = 1000 * 60 * 60 * 24;
                const daysLived = Math.floor((today - birthDate) / msInDay);
                
                const hoursSlept = Math.floor(daysLived * 8);
                const heartbeats = Math.floor(daysLived * 24 * 60 * 70);
                const breaths = Math.floor(daysLived * 24 * 60 * 16);
                const seasons = Math.floor(daysLived / 91.25);
                
                return {
                    weeksLived,
                    totalWeeks,
                    percentageLived,
                    daysLived,
                    hoursSlept,
                    heartbeats,
                    breaths,
                    seasons,
                    birthYear
                };
            };

            const handleSubmit = () => {
                setStats(calculateStats(birthdate));
                setStep(2);
            };

            // Ëé∑ÂèñÂéÜÂè≤‰∫∫Âè£Êï∞ÊçÆ
            const getPopulationAtYear = (year) => {
                const populationData = {
                    1950: 2.5, 1960: 3.0, 1970: 3.7, 1980: 4.4, 1990: 5.3,
                    2000: 6.1, 2010: 6.9, 2020: 7.8, 2025: 8.1
                };
                
                const years = Object.keys(populationData).map(Number);
                const closestYear = years.reduce((prev, curr) => 
                    Math.abs(curr - year) < Math.abs(prev - year) ? curr : prev
                );
                
                return Math.round(populationData[closestYear] * 1000000000);
            };

            // ÂàÜ‰∫´ÂäüËÉΩ
            const shareToWechat = () => {
                const text = isChineseLocale 
                    ? `ÊàëÂ∑≤ÁªèÂ∫¶Ëøá‰∫Ü${getFormattedNumber(stats.weeksLived)}Âë®ÔºåËøôÊòØÂÆåÊï¥‰∫∫ÁîüÁöÑ${stats.percentageLived}%ÔºÅÂø´Êù•ÁúãÁúã‰Ω†ÁöÑ‰∫∫ÁîüÂë®Êï∞ÂèØËßÜÂåñÂêßÔºÅ${window.location.href}`
                    : `I've lived ${getFormattedNumber(stats.weeksLived)} weeks, which is ${stats.percentageLived}% of a full life! Check out your life in weeks visualization! ${window.location.href}`;
                
                const isWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());
                
                if (isWechat) {
                    if (window.wx && window.wx.config) {
                        window.wx.ready(() => {
                            window.wx.onMenuShareTimeline({
                                title: isChineseLocale ? `ÊàëÁöÑ‰∫∫ÁîüÂë®Êï∞: ${stats.percentageLived}%Â∑≤ÂÆåÊàê` : `My Life in Weeks: ${stats.percentageLived}% Complete`,
                                link: window.location.href,
                                imgUrl: '',
                                success: () => console.log('ÂàÜ‰∫´ÊàêÂäü')
                            });
                            window.wx.invoke('shareTimeline');
                        });
                    } else {
                        navigator.clipboard.writeText(text).then(() => {
                            alert(isChineseLocale 
                                ? 'ÂÜÖÂÆπÂ∑≤Â§çÂà∂ÔºÅËØ∑ÁÇπÂáªÂè≥‰∏äËßí"..."ÊåâÈíÆÂàÜ‰∫´Âà∞ÊúãÂèãÂúà'
                                : 'Content copied! Please click "..." button to share to Moments'
                            );
                        }).catch(() => {
                            alert(isChineseLocale 
                                ? 'ËØ∑ÁÇπÂáªÂè≥‰∏äËßí"..."ÊåâÈíÆÔºåÈÄâÊã©"ÂàÜ‰∫´Âà∞ÊúãÂèãÂúà"'
                                : 'Please click the "..." button in the top right corner and select "Share to Moments"'
                            );
                        });
                    }
                } else {
                    navigator.clipboard.writeText(text).then(() => {
                        alert(isChineseLocale 
                            ? 'ÈìæÊé•Â∑≤Â§çÂà∂ÔºÅËØ∑Âú®ÂæÆ‰ø°‰∏≠Á≤òË¥¥ÂàÜ‰∫´'
                            : 'Link copied! Please paste and share in WeChat'
                        );
                    });
                }
            };

            const shareToTwitter = () => {
                const text = `I've lived ${getFormattedNumber(stats.weeksLived)} weeks, which is ${stats.percentageLived}% of a full life! Check out your life in weeks visualization!`;
                const url = window.location.href;
                window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
            };

            const shareToFacebook = () => {
                const url = window.location.href;
                window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
            };

            const copyToClipboard = () => {
                const text = isChineseLocale 
                    ? `ÊàëÂ∑≤ÁªèÂ∫¶Ëøá‰∫Ü${getFormattedNumber(stats.weeksLived)}Âë®ÔºåËøôÊòØÂÆåÊï¥‰∫∫ÁîüÁöÑ${stats.percentageLived}%ÔºÅÂø´Êù•ÁúãÁúã‰Ω†ÁöÑ‰∫∫ÁîüÂë®Êï∞ÂèØËßÜÂåñÂêßÔºÅ${window.location.href}`
                    : `I've lived ${getFormattedNumber(stats.weeksLived)} weeks, which is ${stats.percentageLived}% of a full life! Check out your life in weeks visualization! ${window.location.href}`;
                
                navigator.clipboard.writeText(text).then(() => {
                    alert(isChineseLocale ? 'Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ' : 'Copied to clipboard!');
                });
            };

            // ‰∏ãËΩΩÂàÜ‰∫´Âç°Áâá
            const downloadShareCard = () => {
                const isWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 1080;
                canvas.height = 1350;

                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(0.5, '#764ba2');
                gradient.addColorStop(1, '#667eea');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                ctx.fillStyle = 'rgba(255,255,255,0.1)';
                for (let i = 0; i < 100; i++) {
                    ctx.beginPath();
                    ctx.arc(Math.random() * canvas.width, Math.random() * canvas.height, Math.random() * 3, 0, 2 * Math.PI);
                    ctx.fill();
                }

                ctx.fillStyle = 'white';
                ctx.textAlign = 'center';
                
                ctx.font = 'bold 64px Arial';
                ctx.fillText(t('shareCardTitle'), canvas.width/2, 150);
                
                ctx.font = 'bold 120px Arial';
                ctx.fillText(getFormattedNumber(stats.weeksLived), canvas.width/2, 300);
                
                ctx.font = '36px Arial';
                ctx.fillText(isChineseLocale ? 'Âë®Â∑≤Â∫¶Ëøá' : 'weeks lived', canvas.width/2, 350);
                
                ctx.font = 'bold 80px Arial';
                ctx.fillText(`${stats.percentageLived}%`, canvas.width/2, 480);
                
                ctx.font = '36px Arial';
                ctx.fillText(isChineseLocale ? 'ÁöÑ‰∫∫ÁîüÂ∑≤ÂÆåÊàê' : 'of life completed', canvas.width/2, 530);
                
                ctx.strokeStyle = 'rgba(255,255,255,0.5)';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(canvas.width/4, 580);
                ctx.lineTo(canvas.width*3/4, 580);
                ctx.stroke();
                
                ctx.font = '32px Arial';
                ctx.fillStyle = 'rgba(255,255,255,0.9)';
                
                ctx.fillText(`${getFormattedNumber(stats.daysLived)} ${isChineseLocale ? 'Â§©ÁöÑÁªèÂéÜ' : 'days experienced'}`, canvas.width/2, 680);
                ctx.fillText(`${getFormattedNumber(stats.heartbeats)} ${isChineseLocale ? 'Ê¨°ÂøÉË∑≥' : 'heartbeats'}`, canvas.width/2, 730);
                ctx.fillText(`${getFormattedNumber(stats.breaths)} ${isChineseLocale ? 'Ê¨°ÂëºÂê∏' : 'breaths'}`, canvas.width/2, 780);
                ctx.fillText(`${getFormattedNumber(stats.hoursSlept)} ${isChineseLocale ? 'Â∞èÊó∂Áù°Áú†' : 'hours of sleep'}`, canvas.width/2, 830);
                
                ctx.font = '28px Arial';
                ctx.fillStyle = 'rgba(255,255,255,0.8)';
                
                const earthDistance = Math.round(stats.daysLived * 1.6 * 1000000);
                ctx.fillText(`${isChineseLocale ? 'Âú∞ÁêÉË°åËøõË∑ùÁ¶ª' : 'Earth traveled'}: ${getFormattedNumber(earthDistance)} km`, canvas.width/2, 920);
                
                const lunarCycles = Math.round(stats.daysLived / 29.53);
                ctx.fillText(`${getFormattedNumber(lunarCycles)} ${isChineseLocale ? '‰∏™Êúà‰∫ÆÂë®Êúü' : 'lunar cycles'}`, canvas.width/2, 960);
                
                ctx.fillStyle = 'rgba(255,255,255,0.6)';
                ctx.font = '24px Arial';
                ctx.fillText('Life in Weeks Visualization', canvas.width/2, 1250);

                const imageData = canvas.toDataURL('image/png', 1.0);
                
                if (isWechat || isMobile) {
                    const newWindow = window.open();
                    newWindow.document.write(`
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <meta charset="UTF-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1.0">
                            <title>${isChineseLocale ? 'ÈïøÊåâ‰øùÂ≠òÂõæÁâá' : 'Long press to save image'}</title>
                            <style>
                                body {
                                    margin: 0;
                                    padding: 20px;
                                    background: #f0f0f0;
                                    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
                                    text-align: center;
                                }
                                .tip {
                                    background: #07c160;
                                    color: white;
                                    padding: 15px;
                                    border-radius: 8px;
                                    margin-bottom: 20px;
                                    font-size: 16px;
                                }
                                img {
                                    max-width: 100%;
                                    height: auto;
                                    border-radius: 8px;
                                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                }
                            </style>
                        </head>
                        <body>
                            <div class="tip">
                                ${isChineseLocale ? 'üì± ÈïøÊåâ‰∏ãÊñπÂõæÁâá‰øùÂ≠òÂà∞Áõ∏ÂÜå' : 'üì± Long press the image below to save to album'}
                            </div>
                            <img src="${imageData}" alt="Life in Weeks Share Card" />
                        </body>
                        </html>
                    `);
                    newWindow.document.close();
                } else {
                    const link = document.createElement('a');
                    link.download = `life-in-weeks-${stats.weeksLived}-weeks.png`;
                    link.href = imageData;
                    link.click();
                }
            };

            // Ê∏≤ÊüìÂë®Êï∞ÁΩëÊ†º
            const renderWeekGrid = () => {
                if (!stats) return null;
                
                const rows = [];
                const weeksPerRow = 52;
                const totalRows = Math.ceil(stats.totalWeeks / weeksPerRow);
                
                for (let row = 0; row < totalRows; row++) {
                    const weekCells = [];
                    for (let col = 0; col < weeksPerRow; col++) {
                        const weekNumber = row * weeksPerRow + col;
                        if (weekNumber < stats.totalWeeks) {
                            const isPast = weekNumber < stats.weeksLived;
                            const isCurrent = weekNumber === stats.weeksLived;
                            
                            let cellClass = "w-1.5 h-1.5 rounded-full transition-all duration-500 ease-out transform hover:scale-150 hover:z-10 relative cursor-pointer ";
                            if (isPast) {
                                cellClass += "bg-gradient-to-br from-blue-400 to-indigo-600 shadow-sm hover:shadow-lg ";
                            } else if (isCurrent) {
                                cellClass += "bg-gradient-to-br from-orange-400 to-pink-500 shadow-md animate-pulse hover:shadow-xl ring-2 ring-orange-300 ";
                            } else {
                                cellClass += "bg-gray-200 hover:bg-gray-300 ";
                            }
                            
                            weekCells.push(
                                React.createElement('div', {
                                    key: weekNumber,
                                    className: cellClass,
                                    onMouseEnter: () => {
                                        setHoverWeek(weekNumber);
                                        setShowHoverData(true);
                                    },
                                    onMouseLeave: () => setShowHoverData(false)
                                })
                            );
                        }
                    }
                    
                    rows.push(
                        React.createElement('div', {
                            key: row,
                            className: "flex gap-1 justify-center"
                        }, weekCells)
                    );
                }
                
                return React.createElement('div', { className: "mt-4 md:mt-8" },
                    React.createElement('div', { className: "bg-white/80 backdrop-blur-xl border border-white/20 rounded-3xl mobile-card shadow-2xl shadow-blue-500/10" },
                        React.createElement('div', { className: "flex flex-col space-y-4 mb-4 md:flex-row md:space-y-0 md:items-center md:justify-between" },
                            React.createElement('h2', { className: "text-lg md:text-2xl font-semibold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent" }, t('lifeInWeeksTitle')),
                            React.createElement('div', { className: "flex flex-wrap items-center gap-2 text-xs md:text-sm" },
                                React.createElement('div', { className: "flex items-center space-x-1" },
                                    React.createElement('div', { className: "w-2 h-2 md:w-3 md:h-3 rounded-full bg-gradient-to-br from-blue-400 to-indigo-600" }),
                                    React.createElement('span', { className: "text-gray-600 font-medium mobile-text" }, t('legendPast'))
                                ),
                                React.createElement('div', { className: "flex items-center space-x-1" },
                                    React.createElement('div', { className: "w-2 h-2 md:w-3 md:h-3 rounded-full bg-gradient-to-br from-orange-400 to-pink-500 animate-pulse ring-1 md:ring-2 ring-orange-300" }),
                                    React.createElement('span', { className: "text-gray-600 font-medium mobile-text" }, t('legendPresent'))
                                ),
                                React.createElement('div', { className: "flex items-center space-x-1" },
                                    React.createElement('div', { className: "w-2 h-2 md:w-3 md:h-3 rounded-full bg-gray-200" }),
                                    React.createElement('span', { className: "text-gray-600 font-medium mobile-text" }, t('legendFuture'))
                                )
                            )
                        ),
                        React.createElement('div', { className: "week-grid space-y-1 overflow-hidden rounded-2xl p-2 md:p-4 bg-gray-50/50" }, rows),
                        showHoverData && React.createElement('div', { className: "mt-4 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-100" },
                            React.createElement('p', { className: "text-xs md:text-sm font-medium text-gray-700 mobile-text" },
                                React.createElement('span', { className: "text-blue-600" }, `Week ${hoverWeek + 1}`),
                                hoverWeek < stats.weeksLived ? 
                                    t('weekHoverPast') : 
                                    hoverWeek === stats.weeksLived ? 
                                    t('weekHoverCurrent') : 
                                    t('weekHoverFuture')
                            )
                        )
                    )
                );
            };

            // Ê∏≤ÊüìÁªüËÆ°Êï∞ÊçÆ
            const renderStats = () => {
                if (!stats) return null;
                
                return React.createElement('div', { className: "mt-4 md:mt-8 space-y-4 md:space-y-6" },
                    // ‰∫∫Áîü‰∫ÆÁÇπ
                    React.createElement('div', { className: "bg-white/80 backdrop-blur-xl border border-white/20 rounded-3xl mobile-card shadow-2xl shadow-purple-500/10" },
                        React.createElement('div', { className: "flex items-center mb-4" },
                            React.createElement('div', { className: "w-1 h-6 bg-gradient-to-b from-purple-500 to-pink-500 rounded-full mr-3" }),
                            React.createElement('h2', { className: "text-lg md:text-2xl font-semibold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent" }, t('lifeHighlightsTitle'))
                        ),
                        React.createElement('div', { className: "space-y-3" },
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl border border-purple-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700 leading-relaxed" },
                                    isChineseLocale ? `‰Ω†Â∑≤ÁªèÂ∫¶Ëøá‰∫Ü ${getFormattedNumber(stats.weeksLived)} Âë®ÔºåËøôÊòØÂÆåÊï¥‰∫∫ÁîüÁöÑ ${stats.percentageLived}%„ÄÇ` :
                                    `You've lived ${getFormattedNumber(stats.weeksLived)} weeks, which is ${stats.percentageLived}% of a full life.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-2xl border border-blue-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? `ËøôÁõ∏ÂΩì‰∫é ${getFormattedNumber(stats.daysLived)} Â§©ÁöÑÁªèÂéÜÔºåÂ§ßÁ∫¶ËßÇÂØü‰∫Ü ${getFormattedNumber(stats.seasons)} ‰∏™Â≠£ËäÇ„ÄÇ` :
                                    `That's ${getFormattedNumber(stats.daysLived)} days of experience and approximately ${getFormattedNumber(stats.seasons)} seasons observed.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border border-green-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? `‰Ω†ÁöÑÂøÉËÑèÂ§ßÁ∫¶Ë∑≥Âä®‰∫Ü ${getFormattedNumber(stats.heartbeats)} Ê¨°„ÄÇ` :
                                    `Your heart has beaten approximately ${getFormattedNumber(stats.heartbeats)} times.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-orange-50 to-yellow-50 rounded-2xl border border-orange-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? `‰Ω†Â§ßÁ∫¶ÂëºÂê∏‰∫Ü ${getFormattedNumber(stats.breaths)} Ê¨°ÔºåÁù°Áú†‰∫ÜÁ∫¶ ${getFormattedNumber(stats.hoursSlept)} Â∞èÊó∂„ÄÇ` :
                                    `You've taken around ${getFormattedNumber(stats.breaths)} breaths and slept about ${getFormattedNumber(stats.hoursSlept)} hours.`
                                )
                            )
                        )
                    ),
                    
                    // Á§æ‰ºöËÉåÊôØ
                    React.createElement('div', { className: "bg-white/80 backdrop-blur-xl border border-white/20 rounded-3xl mobile-card shadow-2xl shadow-green-500/10" },
                        React.createElement('div', { className: "flex items-center mb-4" },
                            React.createElement('div', { className: "w-1 h-6 bg-gradient-to-b from-green-500 to-emerald-500 rounded-full mr-3" }),
                            React.createElement('h2', { className: "text-lg md:text-2xl font-semibold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent" }, t('societalContextTitle'))
                        ),
                        React.createElement('div', { className: "space-y-3" },
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border border-green-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `Âú®‰Ω†ÁöÑ‰∏ÄÁîü‰∏≠Ôºå‰∫∫Á±ª‰∫∫Âè£‰ªé ${getFormattedNumber(getPopulationAtYear(stats.birthYear))} Â¢ûÈïøÂà∞Ë∂ÖËøá 80 ‰∫ø‰∫∫„ÄÇ` :
                                        `During your lifetime, humanity's population has grown from ${getFormattedNumber(getPopulationAtYear(stats.birthYear))} to over 8 billion people.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-teal-50 to-cyan-50 rounded-2xl border border-teal-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `ÊôÆÈÄö‰∫∫‰∏ÄÁîü‰ºöÈÅáÂà∞Â§ßÁ∫¶ ${getFormattedNumber(80000)} ‰∏™‰∫∫„ÄÇ‰Ω†ÂèØËÉΩÂ∑≤ÁªèÈÅáÂà∞‰∫ÜÂ§ßÁ∫¶ ${getFormattedNumber(Math.round(80000 * (stats.percentageLived/100)))} ‰∏™‰∫∫„ÄÇ` :
                                        `The average person will meet around ${getFormattedNumber(80000)} people in their lifetime. You've likely already met approximately ${getFormattedNumber(Math.round(80000 * (stats.percentageLived/100)))} individuals.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `Ëá™‰Ω†Âá∫Áîü‰ª•Êù•Ôºå‰∫∫Á±ªÊÄªÂÖ±ÁªèÂéÜ‰∫ÜÂ§ßÁ∫¶ ${getFormattedNumber(Math.round(stats.daysLived * 385000))} Ê¨°Âá∫ÁîüÂíå ${getFormattedNumber(Math.round(stats.daysLived * 166000))} Ê¨°Ê≠ª‰∫°„ÄÇ` :
                                        `Since your birth, humanity has collectively experienced approximately ${getFormattedNumber(Math.round(stats.daysLived * 385000))} births and ${getFormattedNumber(Math.round(stats.daysLived * 166000))} deaths.`
                                )
                            )
                        )
                    ),
                    
                    // ÂÆáÂÆôËßÜËßí
                    React.createElement('div', { className: "bg-white/80 backdrop-blur-xl border border-white/20 rounded-3xl mobile-card shadow-2xl shadow-indigo-500/10" },
                        React.createElement('div', { className: "flex items-center mb-4" },
                            React.createElement('div', { className: "w-1 h-6 bg-gradient-to-b from-indigo-500 to-purple-500 rounded-full mr-3" }),
                            React.createElement('h2', { className: "text-lg md:text-2xl font-semibold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent" }, t('cosmicPerspectiveTitle'))
                        ),
                        React.createElement('div', { className: "space-y-3" },
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `Ëá™‰Ω†Âá∫Áîü‰ª•Êù•ÔºåÂú∞ÁêÉÂõ¥ÁªïÂ§™Èò≥Âú®Â§™Á©∫‰∏≠Ë°åËøõ‰∫ÜÂ§ßÁ∫¶ ${getFormattedNumber(Math.round(stats.daysLived * 1.6 * 1000000))} ÂÖ¨Èáå„ÄÇ` :
                                        `Since your birth, Earth has traveled approximately ${getFormattedNumber(Math.round(stats.daysLived * 1.6 * 1000000))} kilometers through space around the Sun.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl border border-purple-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `ÂèØËßÇÊµãÂÆáÂÆôÂ§ßÁ∫¶Êúâ 930 ‰∫øÂÖâÂπ¥ÂÆΩÔºåËøôÊÑèÂë≥ÁùÄÂÖâÈúÄË¶Å 930 ‰∫øÂπ¥ÊâçËÉΩÁ©øË∂äÂÆÉ„ÄÇ‰Ω†ÁöÑÊï¥‰∏™ÂØøÂëΩÂè™ÊòØÂÆáÂÆôÂπ¥ÈæÑÁöÑ ${(80/13800000000 * 100).toFixed(10)}%„ÄÇ` :
                                        `The observable universe is about 930 billion light-years across, meaning light takes 930 billion years to cross it. Your entire lifespan is just ${(80/13800000000 * 100).toFixed(10)}% of the universe's age.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-violet-50 to-purple-50 rounded-2xl border border-violet-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `Âú®‰Ω†ÁöÑ‰∏ÄÁîü‰∏≠ÔºåÊàë‰ª¨ÁöÑÂ§™Èò≥Á≥ªÂú®Èì∂Ê≤≥Á≥ª‰∏≠ÁßªÂä®‰∫ÜÁ∫¶ ${getFormattedNumber(Math.round(stats.daysLived * 24 * 828000))} ÂÖ¨Èáå„ÄÇ` :
                                        `During your lifetime, our solar system has moved about ${getFormattedNumber(Math.round(stats.daysLived * 24 * 828000))} kilometers through the Milky Way galaxy.`
                                )
                            )
                        )
                    ),
                    
                    // Ëá™ÁÑ∂‰∏ñÁïå
                    React.createElement('div', { className: "bg-white/80 backdrop-blur-xl border border-white/20 rounded-3xl mobile-card shadow-2xl shadow-emerald-500/10" },
                        React.createElement('div', { className: "flex items-center mb-4" },
                            React.createElement('div', { className: "w-1 h-6 bg-gradient-to-b from-emerald-500 to-teal-500 rounded-full mr-3" }),
                            React.createElement('h2', { className: "text-lg md:text-2xl font-semibold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent" }, t('naturalWorldTitle'))
                        ),
                        React.createElement('div', { className: "space-y-3" },
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-2xl border border-emerald-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `‰Ω†ÁªèÂéÜ‰∫ÜÂ§ßÁ∫¶ ${getFormattedNumber(Math.round(stats.daysLived / 29.53))} ‰∏™Êúà‰∫ÆÂë®ÊúüÂíå ${getFormattedNumber(Math.floor(stats.daysLived / 365.25))} Ê¨°ÁéØÁªïÂ§™Èò≥ÁöÑÊóÖÁ®ã„ÄÇ` :
                                        `You've experienced approximately ${getFormattedNumber(Math.round(stats.daysLived / 29.53))} lunar cycles and ${getFormattedNumber(Math.floor(stats.daysLived / 365.25))} trips around the Sun.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl border border-green-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        `‰∏ÄÊ£µÂ∑®ÊùâÂèØ‰ª•Ê¥ª3000Â§öÂπ¥„ÄÇ‰Ω†ÁõÆÂâçÁöÑÂπ¥ÈæÑÊòØÂÖ∂ÊΩúÂú®ÂØøÂëΩÁöÑ ${((stats.daysLived / 365.25) / 3000 * 100).toFixed(2)}%„ÄÇ` :
                                        `A giant sequoia tree can live over 3,000 years. Your current age is ${((stats.daysLived / 365.25) / 3000 * 100).toFixed(2)}% of its potential lifespan.`
                                )
                            ),
                            React.createElement('div', { className: "p-3 bg-gradient-to-r from-lime-50 to-green-50 rounded-2xl border border-lime-100" },
                                React.createElement('p', { className: "mobile-text text-gray-700" },
                                    isChineseLocale ? 
                                        'Âú®‰Ω†ÁöÑ‰∏ÄÁîü‰∏≠Ôºå‰Ω†ÁöÑË∫´‰ΩìÂ∑≤ÁªèÂ§öÊ¨°Êõ¥Êç¢‰∫ÜÂ§ßÈÉ®ÂàÜÁªÜËÉû„ÄÇ‰Ω†Âπ∂ÈùûÁî±Âá∫ÁîüÊó∂ÁöÑÁõ∏ÂêåÂéüÂ≠êÊûÑÊàê„ÄÇ' :
                                        'During your lifetime, your body has replaced most of its cells several times. You are not made of the same atoms you were born with.'
                                )
                            )
                        )
                    )
                );
            };

            // Ê∏≤ÊüìÂàÜ‰∫´ÊåâÈíÆ
            const renderShareButtons = () => {
                if (!showShareOptions) return null;
                
                const isWechat = /micromessenger/.test(navigator.userAgent.toLowerCase());
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                
                return React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-3xl p-4 md:p-6 max-w-md w-full mobile-card" },
                        React.createElement('div', { className: "flex justify-between items-center mb-4 md:mb-6" },
                            React.createElement('h3', { className: "text-lg md:text-xl font-semibold text-gray-800" }, t('shareButton')),
                            React.createElement('button', {
                                onClick: () => setShowShareOptions(false),
                                className: "text-gray-500 hover:text-gray-700 text-2xl p-2"
                            }, '√ó')
                        ),
                        
                        React.createElement('div', { className: "space-y-3 md:space-y-4" },
                            React.createElement('div', { className: "grid grid-cols-2 gap-2 md:gap-3" },
                                React.createElement('button', {
                                    onClick: shareToWechat,
                                    className: "share-btn bg-green-500 text-white p-3 md:p-4 rounded-2xl font-semibold hover:bg-green-600 transition-all mobile-text"
                                }, 'üí¨ ' + (isChineseLocale ? 'ÂæÆ‰ø°ÊúãÂèãÂúà' : 'WeChat')),
                                
                                React.createElement('button', {
                                    onClick: shareToTwitter,
                                    className: "share-btn bg-blue-500 text-white p-3 md:p-4 rounded-2xl font-semibold hover:bg-blue-600 transition-all mobile-text"
                                }, 'üê¶ Twitter'),
                                
                                React.createElement('button', {
                                    onClick: shareToFacebook,
                                    className: "share-btn bg-blue-600 text-white p-3 md:p-4 rounded-2xl font-semibold hover:bg-blue-700 transition-all mobile-text"
                                }, 'üìò Facebook'),
                                
                                React.createElement('button', {
                                    onClick: copyToClipboard,
                                    className: "share-btn bg-gray-600 text-white p-3 md:p-4 rounded-2xl font-semibold hover:bg-gray-700 transition-all mobile-text"
                                }, 'üìã ' + (isChineseLocale ? 'Â§çÂà∂ÈìæÊé•' : 'Copy Link'))
                            ),
                            
                            React.createElement('button', {
                                onClick: downloadShareCard,
                                className: "w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white p-3 md:p-4 rounded-2xl font-semibold hover:from-purple-700 hover:to-pink-700 transition-all mobile-text"
                            }, 'üé® ' + (isWechat || isMobile ? (isChineseLocale ? 'ÁîüÊàêÂàÜ‰∫´ÂõæÁâá' : 'Generate Share Image') : t('downloadCardButton'))),
                            
                            (isWechat || isMobile) && React.createElement('div', { className: "wechat-download-tip mobile-text" },
                                isChineseLocale 
                                    ? 'üì± ÁÇπÂáª‰∏äÊñπÊåâÈíÆÂêéÔºåÂú®Êñ∞È°µÈù¢ÈïøÊåâÂõæÁâáÂç≥ÂèØ‰øùÂ≠òÂà∞Áõ∏ÂÜå'
                                    : 'üì± Click the button above, then long press the image in the new page to save to album'
                            )
                        )
                    )
                );
            };

            const handleReset = () => {
                setBirthdate('');
                setStats(null);
                setStep(1);
                setShowShareOptions(false);
            };

            return React.createElement('div', { className: "min-h-screen relative overflow-hidden" },
                React.createElement('div', { className: "fixed inset-0 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50" },
                    React.createElement('div', { className: "absolute inset-0 overflow-hidden" },
                        React.createElement('div', { className: "absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/30 to-purple-400/30 rounded-full blur-3xl animate-pulse" }),
                        React.createElement('div', { 
                            className: "absolute -bottom-40 -left-40 w-96 h-96 bg-gradient-to-br from-purple-400/30 to-pink-400/30 rounded-full blur-3xl animate-pulse",
                            style: { animationDelay: '2s' }
                        }),
                        React.createElement('div', { 
                            className: "absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-gradient-to-br from-indigo-400/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",
                            style: { animationDelay: '4s' }
                        })
                    ),
                    React.createElement('div', { 
                        className: "absolute inset-0 opacity-5",
                        style: {
                            backgroundImage: `radial-gradient(circle, #6366f1 1px, transparent 1px)`,
                            backgroundSize: '20px 20px'
                        }
                    })
                ),
                
                React.createElement('div', { className: "relative z-10 min-h-screen mobile-padding" },
                    React.createElement('div', { className: "h-4 md:h-6" }),
                    React.createElement('div', { className: "max-w-4xl mx-auto" },
                        React.createElement('div', { className: "text-center mb-6 md:mb-12" },
                            React.createElement('h1', { className: "text-2xl md:text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-purple-800 bg-clip-text text-transparent mb-2 md:mb-4 tracking-tight" }, t('pageTitle')),
                            React.createElement('p', { className: "mobile-text md:text-lg text-gray-600 font-medium" }, t('pageSubtitle'))
                        ),
                        
                        step === 1 ? 
                            React.createElement('div', { className: "bg-white/80 backdrop-blur-xl border border-white/20 rounded-3xl mobile-card shadow-2xl shadow-blue-500/10" },
                                React.createElement('h2', { className: "text-lg md:text-2xl font-semibold text-gray-800 mb-4 md:mb-8 text-center" }, t('birthDateQuestion')),
                                React.createElement('div', { className: "space-y-4 md:space-y-6" },
                                    React.createElement('div', { className: "relative" },
                                        React.createElement('input', {
                                            type: "date",
                                            className: "w-full p-3 md:p-4 mobile-text md:text-lg bg-gray-50/80 backdrop-blur-sm border border-gray-200 rounded-2xl text-gray-800 focus:outline-none focus:ring-4 focus:ring-blue-500/20 focus:border-blue-500 transition-all duration-300 placeholder-gray-400",
                                            value: birthdate,
                                            onChange: (e) => setBirthdate(e.target.value)
                                        })
                                    ),
                                    React.createElement('button', {
                                        onClick: handleSubmit,
                                        className: "w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 md:py-4 px-8 rounded-2xl font-semibold mobile-text md:text-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-4 focus:ring-blue-500/20 transition-all duration-300 shadow-lg shadow-blue-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none transform hover:scale-[1.02] active:scale-[0.98]",
                                        disabled: !birthdate
                                    }, t('visualizeButton'))
                                )
                            ) :
                            React.createElement(React.Fragment, null,
                                renderWeekGrid(),
                                renderStats(),
                                React.createElement('div', { className: "mt-4 md:mt-8 flex flex-col md:flex-row gap-3 md:gap-4" },
                                    React.createElement('button', {
                                        onClick: () => setShowShareOptions(true),
                                        className: "flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 md:py-4 px-8 rounded-2xl font-semibold mobile-text md:text-lg hover:from-green-700 hover:to-emerald-700 focus:outline-none focus:ring-4 focus:ring-green-500/20 transition-all duration-300 shadow-lg transform hover:scale-[1.02] active:scale-[0.98]"
                                    }, 'üöÄ ' + t('shareButton')),
                                    React.createElement('button', {
                                        onClick: handleReset,
                                        className: "flex-1 bg-white/80 backdrop-blur-xl border border-white/20 text-gray-800 py-3 md:py-4 px-8 rounded-2xl font-semibold mobile-text md:text-lg hover:bg-white/90 focus:outline-none focus:ring-4 focus:ring-gray-500/20 transition-all duration-300 shadow-lg transform hover:scale-[1.02] active:scale-[0.98]"
                                    }, t('startOverButton'))
                                )
                            )
                    )
                ),
                
                renderShareButtons()
            );
        }

        ReactDOM.render(React.createElement(WeeksOfLife), document.getElementById('root'));
    </script>
</body>
</html> 